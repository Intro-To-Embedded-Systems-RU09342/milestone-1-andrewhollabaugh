The MSP430 uses three PWM outputs to control the three LED channels. Timers are used to generate the PWM signals. The MSP430G2553 contains two TimerA peripherals, each of which has two PWM outputs. Two PWM outputs from TimerA1 are used, as well as one PWM output from TimerA2. The timers are set to UP mode, with SMCLK as the clock source. No prescaling is used for a high frequency output, resulting in a more constant brightness. The brightness values from the serial command are assigned to the capture/compare registers. The PWM signal is generated by comparing the value in the capture/compare register (the brightness value) with the current timer value. This comparison between a horizontal line and a triangle wave results in a square wave, the PWM signal. Pins P1.6, P2.1, and P2.5 are used for PWM output. Only certain pins can be used, since only certain pins are connected to the PWM-generating hardware.
